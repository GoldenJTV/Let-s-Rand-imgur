<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Let's Rand imgur!</title>
<script type="text/javascript" src="js/randexp.min.js"></script>
<script type="text/javascript">
function init(){
	var textArea = document.getElementById("forumCode");
	var imgurCache = [];
	var fileExt = [".jpg", ".png", ".gif"];
	function newImgur(){
		var length = document.getElementById("imgurQuantity").value;
		while(imgurCache.length<length){
			var imgur = document.createElement("img");
			var randImgur = new RandExp(new RegExp(/[A-Za-z0-9]{5,6}/)).gen();
			var randFileExt = fileExt[Math.floor(Math.random()*3)];
			imgur.src = "http://i.imgur.com/" + randImgur + randFileExt;
			imgurCache.push(imgur.src);
		}
		for(i=0; i<imgurCache.length; i++){
			textArea.value += "[img]" + imgurCache[i] + "[/img]\n";
		}
		textArea.selectionStart = 0;
		textArea.selectionEnd = textArea.value.length;
		textArea.focus();
		console.log(imgurCache);
	}
	document.getElementById("genImgur").onclick = function(){
		imgurCache = [];
		textArea.value = "";
		newImgur();
	}
}
</script>
</head>

<body onLoad="init()">
<center>
<h1>Let's Rand imgur!</h1>
<h6>(powered by randexp.js)</h6>
<textarea id="forumCode" style="width: 400px; height: 200px;"></textarea>
<br>
<div style="width: 400px;">
<span style="float: left;"><button type="button" id="genImgur">Generate</button> <input type="text" id="imgurQuantity" value="5" style="width: 10px;"/> imgur images!</span>
<span style="float: right;"><input type="checkbox" id="showImg" onChange="this.checked=false; alert('Don\'t cheat!');"/><label for="showImg">Show images</label></span>
</div>
</center>
<div id="imgurDisplay"></div>
</body>
</html>
